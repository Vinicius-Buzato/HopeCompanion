<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Mascote da Esperanca</title>
<link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="wrap">
    <div class="app" role="application" aria-label="Mascote da Esperanca">
      <div class="mascot-area">
        <div class="bubble-wrap">
          <div id="bubble" class="bubble hidden" aria-live="polite"> </div>
        </div>

        <div class="mascot-wrap">
          <!-- SVG pixel-art triceratops roxo (maior) -->
          <svg id="mascotSvg" class="mascot" viewBox="0 0 128 128" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <rect width="128" height="128" fill="transparent"/>
            <g>
              <rect x="8" y="36" width="104" height="56" fill="#2f1b3a"/>
              <rect x="12" y="40" width="96" height="48" fill="#6f46b9"/>
              <rect x="68" y="44" width="20" height="12" fill="#9571e6"/>
              <rect x="28" y="48" width="18" height="10" fill="#8b63d9"/>
              <rect x="34" y="62" width="6" height="6" fill="#2b1a2f"/>
              <rect x="54" y="54" width="10" height="10" fill="#ffffff"/>
              <rect x="56" y="56" width="4" height="4" fill="#151515"/>
              <rect x="84" y="28" width="10" height="14" fill="#eac56e"/>
              <rect x="18" y="24" width="10" height="14" fill="#eac56e"/>
              <rect x="28" y="12" width="16" height="12" fill="#f5d79b" opacity="0.95"/>
              <rect x="46" y="66" width="6" height="6" fill="#b69ef5" opacity="0.9"/>
              <rect x="100" y="44" width="12" height="40" fill="#2f1b3a"/>
              <rect x="8" y="44" width="12" height="40" fill="#2f1b3a"/>
            </g>
          </svg>
        </div>
      </div>

      <!-- botoes abaixo, agora com dark toggle como icone -->
      <div class="controls" role="toolbar">
        <button id="btnPhrase" aria-label="Frase motivadora">Frase motivadora</button>
        <button id="btnMemory" class="ghost" aria-label="Memoria">Memoria</button>
        <button id="btnDark" class="icon-btn" aria-label="Alternar modo"> 
          <!-- icon (sun/moon) sera trocado via JS alterando classe -->
          <svg id="darkIcon" viewBox="0 0 24 24" width="18" height="18" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path id="iconPath" d="M12 3v2M12 19v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" stroke="#3b49d6" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
            <circle cx="12" cy="12" r="4" fill="#3b49d6"/>
          </svg>
        </button>
      </div>

    </div>
  </div>

<script>
/* JS principal (mantido inline para simplicidade). Ajustes: bubble, memoria aleatoria, dark toggle icone */
(function(){
  const PHRASES = [
    "Voce ja passou por coisas dificeis e venceu. Confie em si.",
    "Respira. Um passo de cada vez. Dias melhores viram.",
    "Mesmo pequena, uma acao positiva tem poder.",
    "Voce e mais forte do que imagina. Continue.",
    "Lembre: ha sempre algo pelo qual ser grato hoje."
  ];

  const MEMORIES = [
    "passeio no parque com amigos",
    "terminou aquele projeto dificil",
    "aquele dia de risadas que nunca esqueci",
    "conquista: passou naquele exame importante",
    "manha de sol e cafe gostoso"
  ];

  const bubble = document.getElementById('bubble');
  const btnPhrase = document.getElementById('btnPhrase');
  const btnMemory = document.getElementById('btnMemory');
  const btnDark = document.getElementById('btnDark');
  const darkIconPath = document.getElementById('iconPath');
  const mascotSvg = document.getElementById('mascotSvg');

  const LS_DARK = 'mascote_dark_v1';
  const LS_ANIM = 'mascote_anim_v1';

  function rand(arr){ return arr[Math.floor(Math.random()*arr.length)]; }

  let hideTimer = null;
  function showBubble(text, ttl=5200){
    bubble.classList.remove('hidden');
    bubble.textContent = text;
    if(hideTimer) clearTimeout(hideTimer);
    hideTimer = setTimeout(()=> bubble.classList.add('hidden'), ttl);
  }

  btnPhrase.addEventListener('click', ()=>{
    showBubble(rand(PHRASES));
    mascotPop();
  });

  btnMemory.addEventListener('click', ()=>{
    showBubble('Lembra de quando ' + rand(MEMORIES) + '?');
    mascotPop();
  });

  function mascotPop(){
    mascotSvg.style.transform = 'scale(1.02)';
    setTimeout(()=> mascotSvg.style.transform = '', 260);
  }

  // dark mode toggle: on click change class on documentElement and persist; update icon visually
  function setDark(on){
    if(on) document.documentElement.classList.add('dark'); else document.documentElement.classList.remove('dark');
    try{ localStorage.setItem(LS_DARK, on ? '1' : '0'); }catch(e){}
    updateIcon(on);
  }
  function updateIcon(isDark){
    // simple icon swap: moon if dark, sun if light (we change path stroke/fill)
    if(isDark){
      darkIconPath.setAttribute('d', 'M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z'); // moon-like path
      darkIconPath.setAttribute('stroke', '#cfe0ff');
      darkIconPath.setAttribute('fill', '#cfe0ff');
    } else {
      darkIconPath.setAttribute('d', 'M12 3v2M12 19v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42');
      darkIconPath.setAttribute('stroke', '#3b49d6');
      darkIconPath.setAttribute('fill', '#3b49d6');
    }
  }

  // init prefs
  (function init(){
    const d = localStorage.getItem(LS_DARK);
    setDark(d === '1');
    // boot message
    if(MEMORIES.length>0) showBubble('Lembra de quando ' + MEMORIES[MEMORIES.length-1] + '?', 4200);
    else showBubble('Bem vindo! Toque em "Frase motivadora" para comecar', 4200);
  })();

  btnDark.addEventListener('click', ()=>{
    const isDark = document.documentElement.classList.toggle('dark');
    try{ localStorage.setItem(LS_DARK, isDark ? '1' : '0'); }catch(e){}
    updateIcon(isDark);
  });

})();
</script>
</body>
</html>
